name: Video_Stream_Fix
on:
  workflow_dispatch:
    inputs:
      video_url:
        description: 'Direct Link (Seedr)'
        required: true

jobs:
  convert:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: ğŸ—ï¸ Setup
        run: sudo apt-get update && sudo apt-get install -y aria2 ffmpeg

      - name: â¬‡ï¸ Download
        run: |
          aria2c --max-connection-per-server=16 --split=16 -o "source_video" "${{ github.event.inputs.video_url }}"

      - name: ğŸ¬ Fast Process (Stream Copy)
        run: |
          # Ù„ÛØ±Û•Ø¯Ø§ ÙÛÚµÛ• Ø³Û•Ø±Û•Ú©ÛŒÛŒÛ•Ú©Û• Ø¦Û•ÙˆÛ•ÛŒÛ• Ú©Û• -c copy Ø¨Û•Ú©Ø§Ø±Ø¯ÛÙ†ÛŒÙ†
          # Ø¦Û•Ù…Û• ÙˆØ§ Ø¯Û•Ú©Ø§Øª Ú¤ÛŒØ¯ÛŒÛ†Ú©Û• ØªÛ•Ù†Ù‡Ø§ Ú•Û•ÙˆØ§Ù†Û• Ø¨Ú©Ø±ÛØª (Remux) Ù†Û•Ú© Ú©Û†Ø¯ Ø¨Ú©Ø±ÛØªÛ•ÙˆÛ•
          ffmpeg -i "source_video" -c copy -movflags +faststart -y "final_video.mp4"

      - name: ğŸš€ Upload to Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: "v${{ github.run_number }}"
          files: final_video.mp4
          body: |
            Direct Link: https://github.com/${{ github.repository }}/releases/download/v${{ github.run_number }}/final_video.mp4
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
